# TiCDC Protocal format
The following describes the format of the `cdc` protocol.
```
┌────────────────────────────┬─────────────────────┐
│ magic(0xBAAAD700) <4b>     │ version(1) <1b>     │
├────────────────────────────|─────────────────────┤
│     ts<8b>                 │ type <1b>           |
|__________________________________________________|
| ┌──────────────────────────────────────────────┐ │
│ │                 Content                      │ │
│ │                                              | |                
│ └──────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────┘
```

### Content
```$xslt
┌──────────────────────────────────────────┐
│               len <4b>                   |
├──────────────────────────────────────────┤
│ ┌──────────────────────┬───────────────┐ │
│ │ len(str_1) <uvarint> │ str_1 <bytes> │ │
│ ├──────────────────────┴───────────────┤ │
│ │                . . .                 │ │
│ ├──────────────────────┬───────────────┤ │
│ │ len(str_n) <uvarint> │ str_n <bytes> │ │
│ └──────────────────────┴───────────────┘ │
├──────────────────────────────────────────┤
│ CRC32 <4b>                               │
└──────────────────────────────────────────┘
```

for example
For DDL, the content format

```$xslt
┌──────────────────────────────────────────────────────┐
│               len <4b>                               |
├──────────────────────────────────────────────────────┤
│ ┌─────────────────────────────┬──────────────────────┐             
│ │ len(databaseName) <uvarint> │ databaseName <bytes> │ 
│ ├─────────────────────────────┴──────────────────────┤ 
│ │ len(tableName) <uvarint>    │ tableName <bytes>    │
│ ├─────────────────────────────┬──────────────────────┤ 
│ │ len(job) <uvarint>          │ str_n <bytes>        │ 
│ └─────────────────────────────┴──────────────────────┘ 
├────────────────────────────────────────────── ───────┤
│ CRC32 <4b>                                           │
└──────────────────────────────────────────────────────┘
```

For DML, the content format
```$xslt
┌──────────────────────────────────────────────────────┐
│               len <4b>                               |
├──────────────────────────────────────────────────────┤
│ ┌─────────────────────────────┬──────────────────────┐             
│ │ len(databaseName) <uvarint> │ databaseName <bytes> │ 
│ ├─────────────────────────────┴──────────────────────┤ 
│ │ len(tableName) <uvarint>    │ tableName <bytes>    │
│ ├────────────────────────────────────────────────────┤ 
│ │           len(values) <4b>                         |
│ │────────────────────────────────────────────────────┘ 
| │  len(tableName) <uvarint>    │ tableName <bytes>  
│ |_____________________________________________________
| |  len(data type)<1b>|len(data) <uvarint> | data <bytes>
| |_____________________________________________________
| |         ........
| |_____________________________________________________
| |            len(columnInfo) <4b>  
| |_____________________________________________________ 
| |        len(columnInfo)       |  columnInfo<bytes> 
| |____________________________________________________
| |               ........
| |____________________________________________________
|
├────────────────────────────────────────────── ───────┤
│ CRC32 <4b>                                           │
└──────────────────────────────────────────────────────┘

```